<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml" lang="ko">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>app.application module &#8212; CICERON 2.0 documentation</title>
    
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '2.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/translations.js"></script>
    <link rel="index" title="색인" href="../genindex.html" />
    <link rel="search" title="검색" href="../search.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body role="document">
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="module-app.application">
<span id="app-application-module"></span><h1>app.application module<a class="headerlink" href="#module-app.application" title="제목 주소">¶</a></h1>
<p>어플리케이션 서버 본 코드
URL rule과 Response가 정의되어 있음.</p>
<p>TODO: 이 파일에서는 Function call만 하고, Query 날리는 것은 모두 라이브러리화 시켜 서버 갈아타기 쉽게 하기</p>
<dl class="data">
<dt id="app.application.DATABASE">
<code class="descclassname">app.application.</code><code class="descname">DATABASE</code><em class="property"> = 'host=cicerontest.cng6yzqtxqhh.ap-northeast-1.rds.amazonaws.com port=5432 dbname=ciceron user=ciceron_web password=noSecret01!'</em><a class="headerlink" href="#app.application.DATABASE" title="정의 주소">¶</a></dt>
<dd><p>Execute following first!!</p>
</dd></dl>

<dl class="function">
<dt id="app.application.access_profile_pic">
<code class="descclassname">app.application.</code><code class="descname">access_profile_pic</code><span class="sig-paren">(</span><em>user_id</em>, <em>fake_filename</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/app/application.html#access_profile_pic"><span class="viewcode-link">[소스]</span></a><a class="headerlink" href="#app.application.access_profile_pic" title="정의 주소">¶</a></dt>
<dd><p>프로파일 사진 access를 위한 API.
파라미터 중 하나 이름이 fake_filename인 이유는, 이거 별로 중요하지 않아서
아무렇게나 입력해도 파일은 받아진다. 근데 확장자 잘못 넣으면 파일 안 열릴수도.</p>
</dd></dl>

<dl class="function">
<dt id="app.application.access_request_file">
<code class="descclassname">app.application.</code><code class="descname">access_request_file</code><span class="sig-paren">(</span><em>doc_id</em>, <em>fake_filename</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/app/application.html#access_request_file"><span class="viewcode-link">[소스]</span></a><a class="headerlink" href="#app.application.access_request_file" title="정의 주소">¶</a></dt>
<dd><p>문서 의뢰 파일 access를 위한 API</p>
</dd></dl>

<dl class="function">
<dt id="app.application.access_request_pic">
<code class="descclassname">app.application.</code><code class="descname">access_request_pic</code><span class="sig-paren">(</span><em>photo_id</em>, <em>fake_filename</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/app/application.html#access_request_pic"><span class="viewcode-link">[소스]</span></a><a class="headerlink" href="#app.application.access_request_pic" title="정의 주소">¶</a></dt>
<dd><p>사진 의뢰 access를 위한 API
file을 직접 access하는 것이 아닌, DB에 저장된 Bianry를 파일로 만들어서 준다.</p>
</dd></dl>

<dl class="function">
<dt id="app.application.access_request_sound">
<code class="descclassname">app.application.</code><code class="descname">access_request_sound</code><span class="sig-paren">(</span><em>sound_id</em>, <em>fake_filename</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/app/application.html#access_request_sound"><span class="viewcode-link">[소스]</span></a><a class="headerlink" href="#app.application.access_request_sound" title="정의 주소">¶</a></dt>
<dd><p>음성 의뢰 파일 access를 위한 API</p>
</dd></dl>

<dl class="function">
<dt id="app.application.addUser_groupRequest">
<code class="descclassname">app.application.</code><code class="descname">addUser_groupRequest</code><span class="sig-paren">(</span><em>request_id</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/app/application.html#addUser_groupRequest"><span class="viewcode-link">[소스]</span></a><a class="headerlink" href="#app.application.addUser_groupRequest" title="정의 주소">¶</a></dt>
<dd><p>번역 공동구매 결제</p>
</dd></dl>

<dl class="function">
<dt id="app.application.be_hero">
<code class="descclassname">app.application.</code><code class="descname">be_hero</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/app/application.html#be_hero"><span class="viewcode-link">[소스]</span></a><a class="headerlink" href="#app.application.be_hero" title="정의 주소">¶</a></dt>
<dd><p>번역가 권한 신청</p>
</dd></dl>

<dl class="function">
<dt id="app.application.before_request">
<code class="descclassname">app.application.</code><code class="descname">before_request</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/app/application.html#before_request"><span class="viewcode-link">[소스]</span></a><a class="headerlink" href="#app.application.before_request" title="정의 주소">¶</a></dt>
<dd><p>모든 API 실행 전 실행하는 부분. 여기서는 DB 연결.</p>
</dd></dl>

<dl class="function">
<dt id="app.application.change_password">
<code class="descclassname">app.application.</code><code class="descname">change_password</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/app/application.html#change_password"><span class="viewcode-link">[소스]</span></a><a class="headerlink" href="#app.application.change_password" title="정의 주소">¶</a></dt>
<dd><p>패스워드 변경</p>
<dl class="docutils">
<dt>로직</dt>
<dd><ol class="first last arabic simple">
<li>현재 패스워드의 sha256 값 불러와서 비교</li>
<li>일치하면 새로운 패스워드의 sha256값 엎어치기</li>
</ol>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="app.application.check_promotionCode">
<code class="descclassname">app.application.</code><code class="descname">check_promotionCode</code><span class="sig-paren">(</span><em>request_id</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/app/application.html#check_promotionCode"><span class="viewcode-link">[소스]</span></a><a class="headerlink" href="#app.application.check_promotionCode" title="정의 주소">¶</a></dt>
<dd><p>프로모션 코드 유효성 체크
적용은 결제 API에서 이루어짐</p>
<p>promoCode = common -&gt; 누구나 적용하는 캠페인
promoCode = indiv -&gt; 개인한테만 제공</p>
</dd></dl>

<dl class="function">
<dt id="app.application.client_complete_groups">
<code class="descclassname">app.application.</code><code class="descname">client_complete_groups</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/app/application.html#client_complete_groups"><span class="viewcode-link">[소스]</span></a><a class="headerlink" href="#app.application.client_complete_groups" title="정의 주소">¶</a></dt>
<dd><p>의뢰인기준 완료한 티켓 그룹관리.
그룹목목 보기 (GET), 그룹 생성 (POST)</p>
</dd></dl>

<dl class="function">
<dt id="app.application.client_completed_items">
<code class="descclassname">app.application.</code><code class="descname">client_completed_items</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/app/application.html#client_completed_items"><span class="viewcode-link">[소스]</span></a><a class="headerlink" href="#app.application.client_completed_items" title="정의 주소">¶</a></dt>
<dd><p>완료한 번역 보여주기 (목록)</p>
</dd></dl>

<dl class="function">
<dt id="app.application.client_completed_items_detail">
<code class="descclassname">app.application.</code><code class="descname">client_completed_items_detail</code><span class="sig-paren">(</span><em>request_id</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/app/application.html#client_completed_items_detail"><span class="viewcode-link">[소스]</span></a><a class="headerlink" href="#app.application.client_completed_items_detail" title="정의 주소">¶</a></dt>
<dd><p>완료한 번역 보여주기 (개별)
토글뷰 지원 ( warehousing.restoreArray() )</p>
</dd></dl>

<dl class="function">
<dt id="app.application.client_completed_items_in_group">
<code class="descclassname">app.application.</code><code class="descname">client_completed_items_in_group</code><span class="sig-paren">(</span><em>group_id</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/app/application.html#client_completed_items_in_group"><span class="viewcode-link">[소스]</span></a><a class="headerlink" href="#app.application.client_completed_items_in_group" title="정의 주소">¶</a></dt>
<dd><p>해당 그룹에 속한 티켓 보기 (GET), 해당 그룹으로 티켓 옮기기 (POST)</p>
</dd></dl>

<dl class="function">
<dt id="app.application.client_incompleted_item_control">
<code class="descclassname">app.application.</code><code class="descname">client_incompleted_item_control</code><span class="sig-paren">(</span><em>request_id</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/app/application.html#client_incompleted_item_control"><span class="viewcode-link">[소스]</span></a><a class="headerlink" href="#app.application.client_incompleted_item_control" title="정의 주소">¶</a></dt>
<dd><p>자신이 의뢰한 티켓 처리
조회 (GET),
번역하다가 마감시간 초과시 번역가 변경 없이 마감시간 및 금액 수정(PUT),
번역하다가 마감시간 초과시 번역가 변경하고 스토아로 보낸 후 마감시간 및 금액 수정 (POST),
마감시간 경과한 티켓 삭제 (DELETE)</p>
<p>결제가 필요하면 결제로 이어지는 API 주소 제공, is_paid = false로 마킹</p>
</dd></dl>

<dl class="function">
<dt id="app.application.client_incompleted_items">
<code class="descclassname">app.application.</code><code class="descname">client_incompleted_items</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/app/application.html#client_incompleted_items"><span class="viewcode-link">[소스]</span></a><a class="headerlink" href="#app.application.client_incompleted_items" title="정의 주소">¶</a></dt>
<dd><p>자신이 의뢰한 티켓 중 미완료 리스트 ( status_id in (-1, 0, 1) ) &lt;- 마감시간초과, 의뢰했으나 번역가 미 매칭, 작업진행중</p>
</dd></dl>

<dl class="function">
<dt id="app.application.client_rate_request">
<code class="descclassname">app.application.</code><code class="descname">client_rate_request</code><span class="sig-paren">(</span><em>request_id</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/app/application.html#client_rate_request"><span class="viewcode-link">[소스]</span></a><a class="headerlink" href="#app.application.client_rate_request" title="정의 주소">¶</a></dt>
<dd><p>완료한 번역 유저평가
CICERON.F_REQUESTS.feedback_score에 0~2점 입력</p>
<ul class="simple">
<li>Rating 전에는 번역가에게 대금이 들어가지 않도록 설계 (추후, 1주일동안 평가 없으면 돈 들어가도록 수정)</li>
<li>해당 거래에 대금 지급 완료되었는지도 CICERON.PAYMENT_INFO에 마킹</li>
</ul>
</dd></dl>

<dl class="function">
<dt id="app.application.connect_db">
<code class="descclassname">app.application.</code><code class="descname">connect_db</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/app/application.html#connect_db"><span class="viewcode-link">[소스]</span></a><a class="headerlink" href="#app.application.connect_db" title="정의 주소">¶</a></dt>
<dd><p>DB connector 함수</p>
</dd></dl>

<dl class="function">
<dt id="app.application.create_recovery_code">
<code class="descclassname">app.application.</code><code class="descname">create_recovery_code</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/app/application.html#create_recovery_code"><span class="viewcode-link">[소스]</span></a><a class="headerlink" href="#app.application.create_recovery_code" title="정의 주소">¶</a></dt>
<dd><p>패스워드 잊어버렸을 때 가입한 이메일로 복구 코드 전송
담당하는 테이블: CICERON.EMERGENCY_CODE
로직</p>
<blockquote>
<div><ol class="arabic simple">
<li>유저 이름 받아옴 (핵심은 아니고, 이메일 보낼 때, Dear xx할 때 넣을 이름 조회 목적..)</li>
<li>ciceron_lib.random_string_gen을 이용하여 랜덤 스트링 12자리로 이루어진 복구 코드를 받아옴</li>
<li>UPDATE OR INSERT 복구코드</li>
<li>복구코드 이메일로 전송</li>
</ol>
</div></blockquote>
<p>1 유저당 1레코드만 허용</p>
</dd></dl>

<dl class="function">
<dt id="app.application.deleteUser_groupRequest">
<code class="descclassname">app.application.</code><code class="descname">deleteUser_groupRequest</code><span class="sig-paren">(</span><em>request_id</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/app/application.html#deleteUser_groupRequest"><span class="viewcode-link">[소스]</span></a><a class="headerlink" href="#app.application.deleteUser_groupRequest" title="정의 주소">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="app.application.delete_item_client">
<code class="descclassname">app.application.</code><code class="descname">delete_item_client</code><span class="sig-paren">(</span><em>request_id</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/app/application.html#delete_item_client"><span class="viewcode-link">[소스]</span></a><a class="headerlink" href="#app.application.delete_item_client" title="정의 주소">¶</a></dt>
<dd><p>의뢰한 티켓 삭제</p>
<p>의미는 삭제지만, 실제 구동은 status_id = -2이다. status_id = -2의 의미는 삭제라는 뜻이다.
로직</p>
<blockquote>
<div><ol class="arabic simple">
<li>티켓 가격을 불러운다.</li>
<li>사용한 티켓값은 적립금으로 돌려준다.</li>
<li>티켓 status_id = -2 로 변경한다.</li>
</ol>
</div></blockquote>
</dd></dl>

<dl class="function">
<dt id="app.application.doc_allowed_file">
<code class="descclassname">app.application.</code><code class="descname">doc_allowed_file</code><span class="sig-paren">(</span><em>filename</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/app/application.html#doc_allowed_file"><span class="viewcode-link">[소스]</span></a><a class="headerlink" href="#app.application.doc_allowed_file" title="정의 주소">¶</a></dt>
<dd><p>확장자를 보고 문서인지 아닌지 판별
:param string filename: 파일 이름</p>
</dd></dl>

<dl class="function">
<dt id="app.application.expected_time">
<code class="descclassname">app.application.</code><code class="descname">expected_time</code><span class="sig-paren">(</span><em>request_id</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/app/application.html#expected_time"><span class="viewcode-link">[소스]</span></a><a class="headerlink" href="#app.application.expected_time" title="정의 주소">¶</a></dt>
<dd><p>(현재 사용하지 않음)
예상완료시간 보기 (GET), 입력(POST), 번역포기 (DELETE)</p>
<p>번역가가 번역을 하겠다고 마킹을 하면 바로 번역을 진행하는 것이 아니라, 먼저 본문을 한 번 열람을 하고,
언제까지 번역이 가능한지 예상 시간을 입력한다. (혹은 번역 포기를 한다.)
만약 번역하겠다고 한 시간에서 1/3 시점까지 예상시간을 입력하지 않으면 자동으로 번역불가로 간주하고 도로 스토아로 되돌려놓는다.
주가 되는 column은 CICERON.F_REQUESTS.expected_time이다.</p>
</dd></dl>

<dl class="function">
<dt id="app.application.getFileForClient">
<code class="descclassname">app.application.</code><code class="descname">getFileForClient</code><span class="sig-paren">(</span><em>request_id</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/app/application.html#getFileForClient"><span class="viewcode-link">[소스]</span></a><a class="headerlink" href="#app.application.getFileForClient" title="정의 주소">¶</a></dt>
<dd><p>다중파일의뢰 파일 가져오기(GET) / 업데이트(PUT)</p>
</dd></dl>

<dl class="function">
<dt id="app.application.getOneTicketOfClient">
<code class="descclassname">app.application.</code><code class="descname">getOneTicketOfClient</code><span class="sig-paren">(</span><em>request_id</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/app/application.html#getOneTicketOfClient"><span class="viewcode-link">[소스]</span></a><a class="headerlink" href="#app.application.getOneTicketOfClient" title="정의 주소">¶</a></dt>
<dd><p>request_id만 입력받으면 알아서 status_id 감지하여 상황에 맞게 API를 포워딩해주고 상황에 맞는 데이터를 제공해주는 API
의뢰인 전용</p>
</dd></dl>

<dl class="function">
<dt id="app.application.getOneTicketOfHero">
<code class="descclassname">app.application.</code><code class="descname">getOneTicketOfHero</code><span class="sig-paren">(</span><em>request_id</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/app/application.html#getOneTicketOfHero"><span class="viewcode-link">[소스]</span></a><a class="headerlink" href="#app.application.getOneTicketOfHero" title="정의 주소">¶</a></dt>
<dd><p>request_id만 입력받으면 알아서 status_id 감지하여 상황에 맞게 API를 포워딩해주고 상황에 맞는 데이터를 제공해주는 API
번역가 전용</p>
</dd></dl>

<dl class="function">
<dt id="app.application.getOrUpdateFile">
<code class="descclassname">app.application.</code><code class="descname">getOrUpdateFile</code><span class="sig-paren">(</span><em>request_id</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/app/application.html#getOrUpdateFile"><span class="viewcode-link">[소스]</span></a><a class="headerlink" href="#app.application.getOrUpdateFile" title="정의 주소">¶</a></dt>
<dd><p>다중파일의뢰 파일 가져오기(GET) / 업데이트(PUT)</p>
</dd></dl>

<dl class="function">
<dt id="app.application.get_groupRequest_list">
<code class="descclassname">app.application.</code><code class="descname">get_groupRequest_list</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/app/application.html#get_groupRequest_list"><span class="viewcode-link">[소스]</span></a><a class="headerlink" href="#app.application.get_groupRequest_list" title="정의 주소">¶</a></dt>
<dd><p>번역 공동구매원 모집 리스트</p>
</dd></dl>

<dl class="function">
<dt id="app.application.get_notification">
<code class="descclassname">app.application.</code><code class="descname">get_notification</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/app/application.html#get_notification"><span class="viewcode-link">[소스]</span></a><a class="headerlink" href="#app.application.get_notification" title="정의 주소">¶</a></dt>
<dd><p>알림 내역 조회</p>
</dd></dl>

<dl class="function">
<dt id="app.application.get_oneGroupRequest">
<code class="descclassname">app.application.</code><code class="descname">get_oneGroupRequest</code><span class="sig-paren">(</span><em>request_id</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/app/application.html#get_oneGroupRequest"><span class="viewcode-link">[소스]</span></a><a class="headerlink" href="#app.application.get_oneGroupRequest" title="정의 주소">¶</a></dt>
<dd><p>번역 공동구매원 모집 리스트 (개별티켓)</p>
</dd></dl>

<dl class="function">
<dt id="app.application.i18n_checkSourceAndTranslation">
<code class="descclassname">app.application.</code><code class="descname">i18n_checkSourceAndTranslation</code><span class="sig-paren">(</span><em>request_id</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/app/application.html#i18n_checkSourceAndTranslation"><span class="viewcode-link">[소스]</span></a><a class="headerlink" href="#app.application.i18n_checkSourceAndTranslation" title="정의 주소">¶</a></dt>
<dd><p>i18n 번역 불러오기
i18nHandler.jsonResponse() 사용</p>
</dd></dl>

<dl class="function">
<dt id="app.application.i18n_completedCheckSourceAndTranslation">
<code class="descclassname">app.application.</code><code class="descname">i18n_completedCheckSourceAndTranslation</code><span class="sig-paren">(</span><em>request_id</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/app/application.html#i18n_completedCheckSourceAndTranslation"><span class="viewcode-link">[소스]</span></a><a class="headerlink" href="#app.application.i18n_completedCheckSourceAndTranslation" title="정의 주소">¶</a></dt>
<dd><p>i18n 번역 불러오기
i18nHandler.jsonResponse() 사용</p>
</dd></dl>

<dl class="function">
<dt id="app.application.i18n_download">
<code class="descclassname">app.application.</code><code class="descname">i18n_download</code><span class="sig-paren">(</span><em>request_id</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/app/application.html#i18n_download"><span class="viewcode-link">[소스]</span></a><a class="headerlink" href="#app.application.i18n_download" title="정의 주소">¶</a></dt>
<dd><p>번역 완료된 i18n 의뢰 포멧별로 다운로드</p>
</dd></dl>

<dl class="function">
<dt id="app.application.i18n_getData_complete">
<code class="descclassname">app.application.</code><code class="descname">i18n_getData_complete</code><span class="sig-paren">(</span><em>request_id</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/app/application.html#i18n_getData_complete"><span class="viewcode-link">[소스]</span></a><a class="headerlink" href="#app.application.i18n_getData_complete" title="정의 주소">¶</a></dt>
<dd><p>번역 완료한 i18n 의뢰 열람</p>
</dd></dl>

<dl class="function">
<dt id="app.application.i18n_getData_ongoing">
<code class="descclassname">app.application.</code><code class="descname">i18n_getData_ongoing</code><span class="sig-paren">(</span><em>request_id</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/app/application.html#i18n_getData_ongoing"><span class="viewcode-link">[소스]</span></a><a class="headerlink" href="#app.application.i18n_getData_ongoing" title="정의 주소">¶</a></dt>
<dd><p>번역 진행중인 i18n 의뢰 열람</p>
</dd></dl>

<dl class="function">
<dt id="app.application.i18n_parsing">
<code class="descclassname">app.application.</code><code class="descname">i18n_parsing</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/app/application.html#i18n_parsing"><span class="viewcode-link">[소스]</span></a><a class="headerlink" href="#app.application.i18n_parsing" title="정의 주소">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="app.application.i18n_updateComment">
<code class="descclassname">app.application.</code><code class="descname">i18n_updateComment</code><span class="sig-paren">(</span><em>request_id</em>, <em>variable_id</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/app/application.html#i18n_updateComment"><span class="viewcode-link">[소스]</span></a><a class="headerlink" href="#app.application.i18n_updateComment" title="정의 주소">¶</a></dt>
<dd><p>각 Variable의 comment를 다는 API
평문 번역과는 다르게 i18n 번역에서는 comment를 문장별로 달지 않고 variable 별로 단다.</p>
</dd></dl>

<dl class="function">
<dt id="app.application.i18n_updateSentence">
<code class="descclassname">app.application.</code><code class="descname">i18n_updateSentence</code><span class="sig-paren">(</span><em>request_id</em>, <em>variable_id</em>, <em>paragraph_seq</em>, <em>sentence_seq</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/app/application.html#i18n_updateSentence"><span class="viewcode-link">[소스]</span></a><a class="headerlink" href="#app.application.i18n_updateSentence" title="정의 주소">¶</a></dt>
<dd><p>해당 Variable, 해당 문단의 해당 문장 번역 업데이트.
i18nHandler.updateTranslation() 사용</p>
</dd></dl>

<dl class="function">
<dt id="app.application.idChecker">
<code class="descclassname">app.application.</code><code class="descname">idChecker</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/app/application.html#idChecker"><span class="viewcode-link">[소스]</span></a><a class="headerlink" href="#app.application.idChecker" title="정의 주소">¶</a></dt>
<dd><p>ID 중복조회</p>
<blockquote>
<div>CICERON.D_USERS에 중복된 이메일주소가 있는지 살펴본다.</div></blockquote>
</dd></dl>

<dl class="function">
<dt id="app.application.initial_translate">
<code class="descclassname">app.application.</code><code class="descname">initial_translate</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/app/application.html#initial_translate"><span class="viewcode-link">[소스]</span></a><a class="headerlink" href="#app.application.initial_translate" title="정의 주소">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="app.application.language_assigner">
<code class="descclassname">app.application.</code><code class="descname">language_assigner</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/app/application.html#language_assigner"><span class="viewcode-link">[소스]</span></a><a class="headerlink" href="#app.application.language_assigner" title="정의 주소">¶</a></dt>
<dd><p>해당 유저에게 해당 언어 번역가 권한 부여</p>
</dd></dl>

<dl class="function">
<dt id="app.application.language_rejector">
<code class="descclassname">app.application.</code><code class="descname">language_rejector</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/app/application.html#language_rejector"><span class="viewcode-link">[소스]</span></a><a class="headerlink" href="#app.application.language_rejector" title="정의 주소">¶</a></dt>
<dd><p>해당 유저 번역가 권한 빼앗기</p>
</dd></dl>

<dl class="function">
<dt id="app.application.login">
<code class="descclassname">app.application.</code><code class="descname">login</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/app/application.html#login"><span class="viewcode-link">[소스]</span></a><a class="headerlink" href="#app.application.login" title="정의 주소">¶</a></dt>
<dd><p>로그인 함수</p>
<dl class="docutils">
<dt>로그인 로직</dt>
<dd><ol class="first last arabic simple">
<li>GET /api/login에 접속</li>
<li>로그인 Salt를 받는다.</li>
<li>클라이언트에서는 sha256(salt + sha256(password) + salt) 값을 만들어 서버에 전송한다.</li>
<li>Password 테이블 값과 비교하여 일치하면 session 값들을 고쳐준다.</li>
</ol>
</dd>
<dt>GET</dt>
<dd>No parameter</dd>
<dt>POST</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">param string email:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">유저 email 주소 (ciceron_lib.get_user_id를 통하여 email에서 user_id를 추출할 수 있다.)</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">param string password:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">3번 참조</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="app.application.loginCheck">
<code class="descclassname">app.application.</code><code class="descname">loginCheck</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/app/application.html#loginCheck"><span class="viewcode-link">[소스]</span></a><a class="headerlink" href="#app.application.loginCheck" title="정의 주소">¶</a></dt>
<dd><p>해당 세션의 상태를 보여준다.
아래 return값은 session[var_name]으로 접근 가능하다</p>
<dl class="docutils">
<dt>:returns JSON response</dt>
<dd>useremail: 로그인한 유저의 이메일주소. 로그인 상태 아니면 null
isLoggedIn: 로그인 여부 True/False
isTranslator: 로그인한 유저의 번역가여부 True/False</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="app.application.logout">
<code class="descclassname">app.application.</code><code class="descname">logout</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/app/application.html#logout"><span class="viewcode-link">[소스]</span></a><a class="headerlink" href="#app.application.logout" title="정의 주소">¶</a></dt>
<dd><dl class="docutils">
<dt>로그아웃 함수</dt>
<dd><ul class="first last simple">
<li>session에 들어있는 모든 키 제거</li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="app.application.mail_img">
<code class="descclassname">app.application.</code><code class="descname">mail_img</code><span class="sig-paren">(</span><em>filename</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/app/application.html#mail_img"><span class="viewcode-link">[소스]</span></a><a class="headerlink" href="#app.application.mail_img" title="정의 주소">¶</a></dt>
<dd><p>img 폴더의 이미지들을 access하기 위한 API</p>
</dd></dl>

<dl class="function">
<dt id="app.application.modify_client_completed_groups">
<code class="descclassname">app.application.</code><code class="descname">modify_client_completed_groups</code><span class="sig-paren">(</span><em>str_group_id</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/app/application.html#modify_client_completed_groups"><span class="viewcode-link">[소스]</span></a><a class="headerlink" href="#app.application.modify_client_completed_groups" title="정의 주소">¶</a></dt>
<dd><p>그룹명수정 (PUT), 그룹 지우기 (DELETE)</p>
</dd></dl>

<dl class="function">
<dt id="app.application.modify_translators_complete_groups">
<code class="descclassname">app.application.</code><code class="descname">modify_translators_complete_groups</code><span class="sig-paren">(</span><em>str_group_id</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/app/application.html#modify_translators_complete_groups"><span class="viewcode-link">[소스]</span></a><a class="headerlink" href="#app.application.modify_translators_complete_groups" title="정의 주소">¶</a></dt>
<dd><p>해당 그룹을 삭제한다. (DELETE) 해당 그룹 이름을 바꾼다. (PUT)</p>
</dd></dl>

<dl class="function">
<dt id="app.application.pay_for_request">
<code class="descclassname">app.application.</code><code class="descname">pay_for_request</code><span class="sig-paren">(</span><em>request_id</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/app/application.html#pay_for_request"><span class="viewcode-link">[소스]</span></a><a class="headerlink" href="#app.application.pay_for_request" title="정의 주소">¶</a></dt>
<dd><p>결제 API
/api/requests에서 의뢰한 후 이곳으로 연결해야 is_paid = true로 바꿀 수 있음</p>
<p>pay_by := [web, mobile] 플랫폼을 의미
pay_via := [alipay, paypal, iamport] 결제 플랫폼
promo_type := [common, indiv] 프로모션 코드 있으면 전 회원 캠페인인지, 개인인지 구분
promo_code =&gt; 프로모션 코드
use_point =&gt; 적립금이 있다면, 사용함. 적립금이 있는지 검사하는 로직 수반함
is_additional := [&#8216;true&#8217;, &#8216;false&#8217;] 티켓 등록하면서 일어난 결제인지 (false) 티켓 등록 후 네고, 혹은 티켓 재등록 때문에 생기는 결제인지 (true) 구별
payload =&gt; (iamport 결제에서만 사용) 카드정보, 유효기간 등 입력</p>
</dd></dl>

<dl class="function">
<dt id="app.application.pay_for_request_process">
<code class="descclassname">app.application.</code><code class="descname">pay_for_request_process</code><span class="sig-paren">(</span><em>request_id</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/app/application.html#pay_for_request_process"><span class="viewcode-link">[소스]</span></a><a class="headerlink" href="#app.application.pay_for_request_process" title="정의 주소">¶</a></dt>
<dd><p>결제 후처리 API. Callback API
우리가 직접 부를 일 없음. Alipay, Paypal 등에 결제 후, 성공하면 그 쪽에서 부르는 API
결제정보 DB에 입력하고 is_paid = true로, 혹은 is_addional_point_paid = true로 바꿔주는 일을 한다.</p>
</dd></dl>

<dl class="function">
<dt id="app.application.pic_allowed_file">
<code class="descclassname">app.application.</code><code class="descname">pic_allowed_file</code><span class="sig-paren">(</span><em>filename</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/app/application.html#pic_allowed_file"><span class="viewcode-link">[소스]</span></a><a class="headerlink" href="#app.application.pic_allowed_file" title="정의 주소">¶</a></dt>
<dd><p>확장자를 보고 사진(그림)인지 아닌지 판별
:param string filename: 파일 이름</p>
</dd></dl>

<dl class="function">
<dt id="app.application.pick_request">
<code class="descclassname">app.application.</code><code class="descname">pick_request</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/app/application.html#pick_request"><span class="viewcode-link">[소스]</span></a><a class="headerlink" href="#app.application.pick_request" title="정의 주소">¶</a></dt>
<dd><p>내가 번역중인 티켓 리스트 보여주기 (GET), 내가 번역하기 (POST)</p>
<dl class="docutils">
<dt>POST 로직</dt>
<dd><ol class="first last arabic simple">
<li>혹시 다른 번역가가 작업중인지 체크</li>
<li>이미 내가 번역중인지 체크</li>
<li>내가 해당 언어쌍에 번역 권한이 있는지 체크 (ciceron_lib.strict_translator_checker() )</li>
<li>번역중 상태로 바꿈 (status_id = 1), 번역중인 번역가를 내 ID로 고침 (ongoing_worker_id = %s)</li>
<li>네고 중이었다면, 네고 테이블에서 삭제</li>
<li>이메일 알람 전송</li>
</ol>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="app.application.ping">
<code class="descclassname">app.application.</code><code class="descname">ping</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/app/application.html#ping"><span class="viewcode-link">[소스]</span></a><a class="headerlink" href="#app.application.ping" title="정의 주소">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="app.application.point_detail">
<code class="descclassname">app.application.</code><code class="descname">point_detail</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/app/application.html#point_detail"><span class="viewcode-link">[소스]</span></a><a class="headerlink" href="#app.application.point_detail" title="정의 주소">¶</a></dt>
<dd><p>적립금 / 포인트 사용 및 적립내역 보여줌</p>
</dd></dl>

<dl class="function">
<dt id="app.application.post_translate_item">
<code class="descclassname">app.application.</code><code class="descname">post_translate_item</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/app/application.html#post_translate_item"><span class="viewcode-link">[소스]</span></a><a class="headerlink" href="#app.application.post_translate_item" title="정의 주소">¶</a></dt>
<dd><p>해당 의뢰 번역 완료 선언을 하는 곳이다.
로직</p>
<blockquote>
<div><ol class="arabic simple">
<li>status_id = 1인 놈을 status_id = 2로 업데이트</li>
<li>작업 완료한 번역은 폴더 관리가 된다. 폴더 중 Incoming 폴더에 갖다 집어넣는다. 만약 없다면 만들어 준 다음 집어넣는다.</li>
<li>처음 가입할 때에는 작업 완료된 폴더가 없다. 처음 완료할 때 생성된다. 나중에 번역완료 탭에 가서 폴더를 옮길 수 있다.</li>
<li>해당 의뢰에 네고를 건 것들 모두 삭제한다.</li>
<li>공동구매인 경우, 공동구매한 모든 사람에게 완료 그룹 생성</li>
<li>이메일 노티 전송</li>
</ol>
</div></blockquote>
</dd></dl>

<dl class="function">
<dt id="app.application.public_list">
<code class="descclassname">app.application.</code><code class="descname">public_list</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/app/application.html#public_list"><span class="viewcode-link">[소스]</span></a><a class="headerlink" href="#app.application.public_list" title="정의 주소">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="app.application.public_list_random">
<code class="descclassname">app.application.</code><code class="descname">public_list_random</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/app/application.html#public_list_random"><span class="viewcode-link">[소스]</span></a><a class="headerlink" href="#app.application.public_list_random" title="정의 주소">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="app.application.public_oneTicket">
<code class="descclassname">app.application.</code><code class="descname">public_oneTicket</code><span class="sig-paren">(</span><em>request_id</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/app/application.html#public_oneTicket"><span class="viewcode-link">[소스]</span></a><a class="headerlink" href="#app.application.public_oneTicket" title="정의 주소">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="app.application.public_payment">
<code class="descclassname">app.application.</code><code class="descname">public_payment</code><span class="sig-paren">(</span><em>request_id</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/app/application.html#public_payment"><span class="viewcode-link">[소스]</span></a><a class="headerlink" href="#app.application.public_payment" title="정의 주소">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="app.application.read_notification">
<code class="descclassname">app.application.</code><code class="descname">read_notification</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/app/application.html#read_notification"><span class="viewcode-link">[소스]</span></a><a class="headerlink" href="#app.application.read_notification" title="정의 주소">¶</a></dt>
<dd><p>조회한 노티 읽음으로 처리</p>
</dd></dl>

<dl class="function">
<dt id="app.application.record_user_location">
<code class="descclassname">app.application.</code><code class="descname">record_user_location</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/app/application.html#record_user_location"><span class="viewcode-link">[소스]</span></a><a class="headerlink" href="#app.application.record_user_location" title="정의 주소">¶</a></dt>
<dd><p>사용안함. 지워도 됨.
API call logging에 사용. 지금은 아예 내장시킴</p>
</dd></dl>

<dl class="function">
<dt id="app.application.recover_password">
<code class="descclassname">app.application.</code><code class="descname">recover_password</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/app/application.html#recover_password"><span class="viewcode-link">[소스]</span></a><a class="headerlink" href="#app.application.recover_password" title="정의 주소">¶</a></dt>
<dd><p>복구 코드를 받아 패스워드 재설정하는 부분</p>
<dl class="docutils">
<dt>로직</dt>
<dd><ol class="first last arabic simple">
<li>해당 ID의 복구코드 조회</li>
<li>새 패스워드 중 패스워드가 아무것도 없는 빈 스트링인 경우 막기 위하여 elif에서 빈 스트링에 대한 hash값은 빠꾸처리</li>
<li>패스워드 변경 후 복구 코드는 비움.</li>
</ol>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="app.application.register_or_update_register_id">
<code class="descclassname">app.application.</code><code class="descname">register_or_update_register_id</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/app/application.html#register_or_update_register_id"><span class="viewcode-link">[소스]</span></a><a class="headerlink" href="#app.application.register_or_update_register_id" title="정의 주소">¶</a></dt>
<dd><p>푸시 알림을 위한 기기등록</p>
</dd></dl>

<dl class="function">
<dt id="app.application.register_payback">
<code class="descclassname">app.application.</code><code class="descname">register_payback</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/app/application.html#register_payback"><span class="viewcode-link">[소스]</span></a><a class="headerlink" href="#app.application.register_payback" title="정의 주소">¶</a></dt>
<dd><p>적립금 환불신청 넣는 API</p>
</dd></dl>

<dl class="function">
<dt id="app.application.register_payback_email">
<code class="descclassname">app.application.</code><code class="descname">register_payback_email</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/app/application.html#register_payback_email"><span class="viewcode-link">[소스]</span></a><a class="headerlink" href="#app.application.register_payback_email" title="정의 주소">¶</a></dt>
<dd><p>페이백 신청 보내는 이메일.
/api/user/payback과 기능이 겹치는데 왜 구닥닥리 API를 만드느냐?</p>
<blockquote>
<div>-&gt; 위의건 혹시 개발이 어려울 수 있어서...</div></blockquote>
</dd></dl>

<dl class="function">
<dt id="app.application.requests">
<code class="descclassname">app.application.</code><code class="descname">requests</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/app/application.html#requests"><span class="viewcode-link">[소스]</span></a><a class="headerlink" href="#app.application.requests" title="정의 주소">¶</a></dt>
<dd><p>번역물 의뢰 API</p>
<dl class="docutils">
<dt>로직</dt>
<dd><ol class="first last arabic simple">
<li>로그인 판별</li>
<li>CICERON.F_REQUEST의 새로운 ID따기 (ciceron_lib.get_new_id() 사용)</li>
<li>여러 파라미터 받아옴 (원노트 API 문서 참고)</li>
<li>텍스트, 사진, 음성, 문서, i18n 등등의 형식에 따라 후처리</li>
<li>단문 번역의 경우, isSos = True, 이 경우에는 결제와 상관없이 is_paid = True</li>
<li>일반 의뢰의 경우, isSos = False, 이 경우에는 결제 진행해야 리스트에 보이게 해야 하므로, is_paid = False</li>
<li>splitTrans는 번역 공동구매 여부 선택. is_sound, is_text, is_doc 의 true/false와는 독립적이다.</li>
</ol>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="app.application.return_money">
<code class="descclassname">app.application.</code><code class="descname">return_money</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/app/application.html#return_money"><span class="viewcode-link">[소스]</span></a><a class="headerlink" href="#app.application.return_money" title="정의 주소">¶</a></dt>
<dd><p>환급해줘야 할 내역 조회 (GET), 환급으로 마킹 (POST)</p>
</dd></dl>

<dl class="function">
<dt id="app.application.reviseTranslatedItemByEachLine">
<code class="descclassname">app.application.</code><code class="descname">reviseTranslatedItemByEachLine</code><span class="sig-paren">(</span><em>request_id</em>, <em>paragraph_id</em>, <em>sentence_id</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/app/application.html#reviseTranslatedItemByEachLine"><span class="viewcode-link">[소스]</span></a><a class="headerlink" href="#app.application.reviseTranslatedItemByEachLine" title="정의 주소">¶</a></dt>
<dd><p>문장별 번역 업데이트(PUT), 문장별 원문/번역 살펴보기 (GET)</p>
<dl class="docutils">
<dt>로직</dt>
<dd><ol class="first last arabic simple">
<li>일단 자신이 번역하는 티켓인지 체크</li>
<li>그 다음 보여줄 지, 업데이트할지 하는거 함.</li>
</ol>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="app.application.revise_payback">
<code class="descclassname">app.application.</code><code class="descname">revise_payback</code><span class="sig-paren">(</span><em>str_id</em>, <em>order_no</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/app/application.html#revise_payback"><span class="viewcode-link">[소스]</span></a><a class="headerlink" href="#app.application.revise_payback" title="정의 주소">¶</a></dt>
<dd><p>환급 신청 수정 (PUT), 삭제 (DELETE)</p>
</dd></dl>

<dl class="function">
<dt id="app.application.savePair">
<code class="descclassname">app.application.</code><code class="descname">savePair</code><span class="sig-paren">(</span><em>request_id</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/app/application.html#savePair"><span class="viewcode-link">[소스]</span></a><a class="headerlink" href="#app.application.savePair" title="정의 주소">¶</a></dt>
<dd><p>다중 파일 Request를 완료하면서 결과물 텍스트 혹은 바이너리 입력
바이너리인지 아닌지는 decode시 에러가 나는지 아닌지로 판단</p>
</dd></dl>

<dl class="function">
<dt id="app.application.sentence_tokenize">
<code class="descclassname">app.application.</code><code class="descname">sentence_tokenize</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/app/application.html#sentence_tokenize"><span class="viewcode-link">[소스]</span></a><a class="headerlink" href="#app.application.sentence_tokenize" title="정의 주소">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="app.application.set_title_client">
<code class="descclassname">app.application.</code><code class="descname">set_title_client</code><span class="sig-paren">(</span><em>request_id</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/app/application.html#set_title_client"><span class="viewcode-link">[소스]</span></a><a class="headerlink" href="#app.application.set_title_client" title="정의 주소">¶</a></dt>
<dd><p>완료한 번역에 제목달기
위부터 읽어왔으면 우리는 완료한 번역을 폴더로 관리하는 것은 알 것이리라 믿음
폴더별로 관리하는 티켓에 제목을 달아주는 일임</p>
</dd></dl>

<dl class="function">
<dt id="app.application.set_title_translator">
<code class="descclassname">app.application.</code><code class="descname">set_title_translator</code><span class="sig-paren">(</span><em>str_request_id</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/app/application.html#set_title_translator"><span class="viewcode-link">[소스]</span></a><a class="headerlink" href="#app.application.set_title_translator" title="정의 주소">¶</a></dt>
<dd><p>작업 완료한 번역에 제목 달기</p>
<p>작업 완료한 번역은 폴더식으로 관리한다.
그리하여 원하는 때에 쉽게 꺼내 볼 수 있도록 지원해준다.
여기서 하나 도움을 주는 것이 티켓에 제목달기이다.</p>
<dl class="docutils">
<dt>로직</dt>
<dd><ol class="first last arabic simple">
<li>CICERON.D_TRANSLATOR_COMPLETED_REQUEST_TITLES 에 새 sequence를 딴다. 제목 관리하는 테이블이다. ciceron_lib.get_new_id()</li>
<li>ciceron_lib.get_group_id_from_user_and_text()를 이용하여 Incoming 폴더의 ID를 찾는다.</li>
<li>CICERON.F_REQUESTS 테이블에 업데이트한다.</li>
</ol>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="app.application.show_ongoing_item_client">
<code class="descclassname">app.application.</code><code class="descname">show_ongoing_item_client</code><span class="sig-paren">(</span><em>request_id</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/app/application.html#show_ongoing_item_client"><span class="viewcode-link">[소스]</span></a><a class="headerlink" href="#app.application.show_ongoing_item_client" title="정의 주소">¶</a></dt>
<dd><p>자신이 의뢰한 티켓 중 개별 티켓 확인</p>
</dd></dl>

<dl class="function">
<dt id="app.application.show_ongoing_list_client">
<code class="descclassname">app.application.</code><code class="descname">show_ongoing_list_client</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/app/application.html#show_ongoing_list_client"><span class="viewcode-link">[소스]</span></a><a class="headerlink" href="#app.application.show_ongoing_list_client" title="정의 주소">¶</a></dt>
<dd><p>자신이 의뢰한 티켓 중 번역 진행중인 것 표시 (status_id = 1)
+ 결제완료 여부 필터 첨가</p>
</dd></dl>

<dl class="function">
<dt id="app.application.show_pending_item_client">
<code class="descclassname">app.application.</code><code class="descname">show_pending_item_client</code><span class="sig-paren">(</span><em>request_id</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/app/application.html#show_pending_item_client"><span class="viewcode-link">[소스]</span></a><a class="headerlink" href="#app.application.show_pending_item_client" title="정의 주소">¶</a></dt>
<dd><p>의뢰한 티켓 개별 정보 보기</p>
</dd></dl>

<dl class="function">
<dt id="app.application.show_pending_list_client">
<code class="descclassname">app.application.</code><code class="descname">show_pending_list_client</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/app/application.html#show_pending_list_client"><span class="viewcode-link">[소스]</span></a><a class="headerlink" href="#app.application.show_pending_list_client" title="정의 주소">¶</a></dt>
<dd><p>[현재 사용하지 않음]</p>
<p>티켓을 스토아에 올려는 놓았는데 번역가가 아직 번역을 잡지 않은 경우. 해당 티켓 리스트 보기 (GET)
번역가가 네고를 걸었을 때 수락하면서 차액 지불할 때 (POST)</p>
</dd></dl>

<dl class="function">
<dt id="app.application.show_queue">
<code class="descclassname">app.application.</code><code class="descname">show_queue</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/app/application.html#show_queue"><span class="viewcode-link">[소스]</span></a><a class="headerlink" href="#app.application.show_queue" title="정의 주소">¶</a></dt>
<dd><p>[현재는 사용 안함, 기획 후 사용할수도]
번역가가 가격 네고를 건 티켓 보여주기 (GET), 가격제시하기 (POST)
티켓 단가가 너무 낮아서 번역가들이 작업을 기피하고 있을 때, 번역가들이 티켓 가격을 좀만 올려주면 작업을 하겠다고 말해주는 가격제시 API</p>
<dl class="docutils">
<dt>GET 로직</dt>
<dd><ol class="first last arabic simple">
<li>장바구니 관리 테이블: CICERON.D_QUEUE_LISTS</li>
<li>CICERON.D_QUEUE_LISTS에 있는 티켓 중 내 의뢰인 티켓 번호를 찾아 뿌려줌. 결제 완료 의뢰여야 함 (is_paid = True)</li>
</ol>
</dd>
<dt>POST 로직</dt>
<dd><ol class="first last arabic simple">
<li>기본적으로, 의뢰인 API에서는 의뢰인 입장에서 지불한 금액을 보여주고, 번역가 API에서는 번역가 입장에서 받을 수 있는 금액을 보여준다. 예를 들어, USD 5로 의뢰한 금액을 의뢰인한데는 USD 5로 보여주지만, 번역가에게는 USD 3.5로 보여준다. 번역가 입장에서는 5를 벌고 나중에 가져갈 때 1.5를 공제한다고 하는 것보단 아싸리 3.5 받는다고 하는게 여러모로 좋을 것이라 생각하기 때문이다.</li>
<li>D_USERS 테이블을 보면 번역가의 등급에 따라 return_rate를 다르게 설정할 수 있다. 기본은 0.7이다. 즉, 의뢰금의 70%를 번역가가 가져간다.</li>
<li>이 원리를 거꾸로 생각하면, 번역가가 가격 제시를 할 때에는 return_rate를 고려하여 추가 결제금을 생각향 한다는 것이다. 예를 들어 0.7인 번역가가 7을 제시했으면 의뢰인한테 보여지는 금액은 10이 되어야 한다는 뜻이다.</li>
<li>나머지 짜글짜글한 exception의뜻들이 궁금하면 브라이언에게 문의..</li>
</ol>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="app.application.signup">
<code class="descclassname">app.application.</code><code class="descname">signup</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/app/application.html#signup"><span class="viewcode-link">[소스]</span></a><a class="headerlink" href="#app.application.signup" title="정의 주소">¶</a></dt>
<dd><p>회원가입 함수</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">매개 변수:</th><td class="field-body"><ul class="first last simple">
<li><strong>email</strong> (<a class="reference external" href="https://docs.python.org/2/library/string.html#module-string" title="(in Python v2.7)"><em>string</em></a>) &#8211; 회원 email</li>
<li><strong>password</strong> (<a class="reference external" href="https://docs.python.org/2/library/string.html#module-string" title="(in Python v2.7)"><em>string</em></a>) &#8211; sha256(password) 전송. Salt 없음</li>
<li><strong>name</strong> (<a class="reference external" href="https://docs.python.org/2/library/string.html#module-string" title="(in Python v2.7)"><em>string</em></a>) &#8211; 이름</li>
<li><strong>mother_tongue_id</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) &#8211; 모국어 ID. ID-언어 대응은 원노트 참고</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>핵심 동작 함수: ciceron_lib.signUpQuick()</p>
</dd></dl>

<dl class="function">
<dt id="app.application.sound_allowed_file">
<code class="descclassname">app.application.</code><code class="descname">sound_allowed_file</code><span class="sig-paren">(</span><em>filename</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/app/application.html#sound_allowed_file"><span class="viewcode-link">[소스]</span></a><a class="headerlink" href="#app.application.sound_allowed_file" title="정의 주소">¶</a></dt>
<dd><p>확장자를 보고 음성인지 아닌지 판별
:param string filename: 파일 이름</p>
</dd></dl>

<dl class="function">
<dt id="app.application.teardown_request">
<code class="descclassname">app.application.</code><code class="descname">teardown_request</code><span class="sig-paren">(</span><em>exception</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/app/application.html#teardown_request"><span class="viewcode-link">[소스]</span></a><a class="headerlink" href="#app.application.teardown_request" title="정의 주소">¶</a></dt>
<dd><p>모든 API 실행 후 실행하는 부분. 여기서는 DB 연결종료.</p>
</dd></dl>

<dl class="function">
<dt id="app.application.translation_completed_items_all">
<code class="descclassname">app.application.</code><code class="descname">translation_completed_items_all</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/app/application.html#translation_completed_items_all"><span class="viewcode-link">[소스]</span></a><a class="headerlink" href="#app.application.translation_completed_items_all" title="정의 주소">¶</a></dt>
<dd><p>작업 완료한 티켓 전체조회</p>
<p>status_id = 2 : 작업완료
is_paid: 처음에 지불 완료
is_need_additional_points: 만일, 해당 티켓에 네고가 있었고, 그것을 수락하여 추가 결제가 일어났을 때.
is_additional_points_paid: 추가결제 완료?</p>
</dd></dl>

<dl class="function">
<dt id="app.application.translation_completed_items_detail">
<code class="descclassname">app.application.</code><code class="descname">translation_completed_items_detail</code><span class="sig-paren">(</span><em>request_id</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/app/application.html#translation_completed_items_detail"><span class="viewcode-link">[소스]</span></a><a class="headerlink" href="#app.application.translation_completed_items_detail" title="정의 주소">¶</a></dt>
<dd><p>특정 티켓 조회 + 토글뷰 지원
warehousing.restoreArray() 사용</p>
</dd></dl>

<dl class="function">
<dt id="app.application.translation_completed_items_in_group">
<code class="descclassname">app.application.</code><code class="descname">translation_completed_items_in_group</code><span class="sig-paren">(</span><em>str_group_id</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/app/application.html#translation_completed_items_in_group"><span class="viewcode-link">[소스]</span></a><a class="headerlink" href="#app.application.translation_completed_items_in_group" title="정의 주소">¶</a></dt>
<dd><p>해당 그룹에 속한 티켓을 보여준다. (GET) 해당 그룹으로 티켓을 이동한다. (POST)</p>
<dl class="docutils">
<dt>POST 로직</dt>
<dd><ol class="first last arabic simple">
<li>CICERON.F_REQUESTS에서 translator_completed_group_id 값만 업데이트해주면 된다.</li>
</ol>
</dd>
<dt>GET 로직</dt>
<dd><ol class="first last arabic simple">
<li>translator_completed_group_id로만 필터링하면 된다. 거기에 결제여부 체크 필터 넣어서 보여준다.</li>
</ol>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="app.application.translation_incompleted_items_all">
<code class="descclassname">app.application.</code><code class="descname">translation_incompleted_items_all</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/app/application.html#translation_incompleted_items_all"><span class="viewcode-link">[소스]</span></a><a class="headerlink" href="#app.application.translation_incompleted_items_all" title="정의 주소">¶</a></dt>
<dd><p>미완료 리스트 불러오기
내가 작업중이라서 완료가 되지 않았거나 (status_id = 1), 혹은 시간을 초과한 티켓 (status_id = -1)을 보여준다.
결제여부 필터는 기본이다.</p>
</dd></dl>

<dl class="function">
<dt id="app.application.translation_incompleted_items_each">
<code class="descclassname">app.application.</code><code class="descname">translation_incompleted_items_each</code><span class="sig-paren">(</span><em>request_id</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/app/application.html#translation_incompleted_items_each"><span class="viewcode-link">[소스]</span></a><a class="headerlink" href="#app.application.translation_incompleted_items_each" title="정의 주소">¶</a></dt>
<dd><p>미완료 결제를 티켓 단위로 보는 API. 기본 로직은 위와 동일</p>
</dd></dl>

<dl class="function">
<dt id="app.application.translator_stoa">
<code class="descclassname">app.application.</code><code class="descname">translator_stoa</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/app/application.html#translator_stoa"><span class="viewcode-link">[소스]</span></a><a class="headerlink" href="#app.application.translator_stoa" title="정의 주소">¶</a></dt>
<dd><p>번역가의 스토아 보여주기</p>
<p>Store 아니다. Stoa다. 상점 아니다. 기둥 사이, 토론 공간이다.</p>
<dl class="docutils">
<dt>로직</dt>
<dd><ol class="first last arabic simple">
<li>일반 번역인 경우 (isSos = False) 작업중인 번역가가 없으며, (ongoing_worker_id = null) 번역 진행 상태가 pending이고, (status_id = 0) 번역비 결제가 된 경우 (is_paid = True)</li>
<li>단문 번역인 경우 (isSos = True) 모든 상태를 다 보여줌.</li>
<li>쿼리 후 결과를 ciceron_lib.json_form_V_REQUESTS()를 이용하여 Response를 parsing한다.</li>
<li>ciceron_lib.json_form_V_REQUESTS()이 하는 일은, 각 의뢰에 필요한 정보를 추려 JSON 꼴로 만들어 주는 라이브러리 함수다.</li>
</ol>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="app.application.translators_complete_groups">
<code class="descclassname">app.application.</code><code class="descname">translators_complete_groups</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/app/application.html#translators_complete_groups"><span class="viewcode-link">[소스]</span></a><a class="headerlink" href="#app.application.translators_complete_groups" title="정의 주소">¶</a></dt>
<dd><p>해당 유저의 작업 완료 그룹 리스트를 불러온다.(GET), 새 그룹을 등록한다. (POST)</p>
</dd></dl>

<dl class="function">
<dt id="app.application.updateParagraphComment">
<code class="descclassname">app.application.</code><code class="descname">updateParagraphComment</code><span class="sig-paren">(</span><em>request_id</em>, <em>paragraph_id</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/app/application.html#updateParagraphComment"><span class="viewcode-link">[소스]</span></a><a class="headerlink" href="#app.application.updateParagraphComment" title="정의 주소">¶</a></dt>
<dd><p>문단별 주석 달기 (혼동주의: 위는 문장별, 여기는 문단별)</p>
</dd></dl>

<dl class="function">
<dt id="app.application.updateSentenceComment">
<code class="descclassname">app.application.</code><code class="descname">updateSentenceComment</code><span class="sig-paren">(</span><em>request_id</em>, <em>paragraph_id</em>, <em>sentence_id</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/app/application.html#updateSentenceComment"><span class="viewcode-link">[소스]</span></a><a class="headerlink" href="#app.application.updateSentenceComment" title="정의 주소">¶</a></dt>
<dd><p>문장별 주석 달기</p>
</dd></dl>

<dl class="function">
<dt id="app.application.user_keywords_control">
<code class="descclassname">app.application.</code><code class="descname">user_keywords_control</code><span class="sig-paren">(</span><em>keyword</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/app/application.html#user_keywords_control"><span class="viewcode-link">[소스]</span></a><a class="headerlink" href="#app.application.user_keywords_control" title="정의 주소">¶</a></dt>
<dd><p>프로파일에서 자신을 표현할 수 있는 키워드 기 입력된 키워드에서 검색(GET), 추가(POST), 및 삭제(DELETE)
1) GET</p>
<blockquote>
<div>&lt;keyword&gt;에 집어 넣은 글자를 처음으로 하는, 기 입력된 키워드를 조회하여 후보를 보여준다.
키워드 입력시, 연관검색어를 제공하고자 함이다.</div></blockquote>
<ol class="arabic" start="2">
<li><dl class="first docutils">
<dt>POST</dt>
<dd><p class="first">&lt;keyword&gt;를 입력한다.
Keyword Dimension table: CICERON.D_KEYWORDS
Keyword Fact table: CICERON.D_USER_KEYWORDS</p>
<p class="last">기 입력된 키워드면 키워드ID를 찾아서 유저별로 Mapping한다.
기존에 입력된 키워드가 아니라면 Dimension table에 INSERT한다.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>DELETE</dt>
<dd><p class="first last">해당 유저의 키워드에서 입력된 &lt;keyword&gt;를 삭제한다.
Dimension table의 레코드는 건드리지 않고, Fact table에 적혀있는 mapping만 지운다.</p>
</dd>
</dl>
</li>
</ol>
</dd></dl>

<dl class="function">
<dt id="app.application.user_profile">
<code class="descclassname">app.application.</code><code class="descname">user_profile</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/app/application.html#user_profile"><span class="viewcode-link">[소스]</span></a><a class="headerlink" href="#app.application.user_profile" title="정의 주소">¶</a></dt>
<dd><p>프로파일 조회 API (GET), 정보 업데이트 API (POST)</p>
<ol class="arabic">
<li><dl class="first docutils">
<dt>GET</dt>
<dd><p class="first">응답 정보는 원노트 조회 요망</p>
<p>엥간한 유저 정보: CICERON.D_USERS
일반 유저의 적립금 정보: CICERON.REVENUE  (뜻은 안 맞지만... 이전 설계때문에 이리 되었으니 참아주세요 ㅜㅜ)
번역가 유저의 수당 정보: CICERON.RETURN_POINT</p>
<p class="last">GET으로 불러올 때 ?user_email=&lt;other_user_email&gt; 파라미터로 다른 유저 정보를 조회해올 수 있음
이 때에는, 다른 유저의 포인트 및 적립금은 -65535로 마스킹됨.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>POST</dt>
<dd><p class="first">프로필 소개글이나 프로필 사진 변경가능
프로필 사진 올릴 때에는 Content-Type을 JSON이나 www-urlencode말고, multipart/form-data로 업로드하기 바람</p>
<p class="last">프로파일 사진 바이너리는 CICERON.F_USER_PROFILE_PIC 에 저장됨. 서버에 물리 파일로 저장하지 않음에 유의.
API 경로랍시고 profile_pic_path에 스트링 넣긴 하지만, 의미없음.</p>
</dd>
</dl>
</li>
</ol>
</dd></dl>

<dl class="function">
<dt id="app.application.user_stoa">
<code class="descclassname">app.application.</code><code class="descname">user_stoa</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/app/application.html#user_stoa"><span class="viewcode-link">[소스]</span></a><a class="headerlink" href="#app.application.user_stoa" title="정의 주소">¶</a></dt>
<dd><p>의뢰인의 스토아.
번역가 스토아와는 다르게, 일반 의뢰는 보여주지 않고, 대신 모든 사람의 단문번역 내역을 보여준다.
일반의뢰는 나름 프라이버시로 취급한다.
(단, 9월에 들고갈 번역 공동구매 시작하면 공동구매건은 스토아에 보이게 된다.)</p>
</dd></dl>

<dl class="function">
<dt id="app.application.work_in_queue">
<code class="descclassname">app.application.</code><code class="descname">work_in_queue</code><span class="sig-paren">(</span><em>request_id</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/app/application.html#work_in_queue"><span class="viewcode-link">[소스]</span></a><a class="headerlink" href="#app.application.work_in_queue" title="정의 주소">¶</a></dt>
<dd><p>네고를 걸었던 티켓 네고취소 (DELETE), 네고금액 수정 (PUT)
네고 로직 돌아가는 원리는 바로 위 API의 설명 참고</p>
</dd></dl>

<dl class="function">
<dt id="app.application.working_translate_item">
<code class="descclassname">app.application.</code><code class="descname">working_translate_item</code><span class="sig-paren">(</span><em>request_id</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/app/application.html#working_translate_item"><span class="viewcode-link">[소스]</span></a><a class="headerlink" href="#app.application.working_translate_item" title="정의 주소">¶</a></dt>
<dd><p>번역중인 티켓 개별로 보기</p>
<dl class="docutils">
<dt>로직</dt>
<dd><ol class="first last arabic simple">
<li>기본적으로 위와 로직은 동일</li>
<li>그런데 웨어하우징된 티켓을 프론트에 맞게 재구성하여 보여줌</li>
</ol>
</dd>
</dl>
</dd></dl>

</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
  <div role="note" aria-label="source link">
    <h3>현재 문서</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/docs/app.application.rst.txt"
            rel="nofollow">소스 코드를 보려면</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>빠른 검색</h3>
    <form class="search" action="../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="바로 가기" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2017, psy2848048.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.5.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.9</a>
      
      |
      <a href="../_sources/docs/app.application.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>